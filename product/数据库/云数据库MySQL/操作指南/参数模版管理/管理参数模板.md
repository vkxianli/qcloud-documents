云数据库 MySQL 除了提供系统参数模板供您选择外，您也可以创建自定义参数模板，根据自己的业务场景，实现批量参数设置。

您可以使用数据库参数模板管理数据库引擎的参数配置。数据库参数组就像是引擎配置值的容器，这些值可应用于一个或多个数据库实例。
参数模板支持如下功能，用户可登录 [云数据库 MySQL 控制台](https://console.cloud.tencent.com/cdb)，在左侧边栏选择【参数模板】页查看参数：
- 支持系统默认参数模板。
- 支持新建模板，以默认参数为基础，稍加修改就能生成自定义的参数优化方案。
- 支持从 MySQL 配置文件 my.conf 导入生成模板。
- 支持从参数设置保存为模板。
- 单个或多个实例进行参数设置时，支持从模板导入。
>!已使用参数模板的数据库实例并不会随着参数模板更新而同步更新，需要手动批量更新数据库实例。
>如果您需要将新的参数应用到批量实例上，可通过批量参数设置时导入模板来重新应用。


## 新建参数模板
当您想使用自己的数据库参数模板时，只需创建一个新的数据库参数模板，修改所需的参数并应用于您的数据库，就可以使用新的数据库参数模板。
1. 登录 [MySQL 控制台](https://console.cloud.tencent.com/mysql/parameter-templates)，在左侧导航选择【参数模板】页面，单击【创建模板】。
![](https://main.qcloudimg.com/raw/20bbc344f0a53a8c44160eb3fb7dbb00.png)
2. 在弹出的对话框，配置如下参数，单击【创建并设置参数】
 - **模板名称**：输入参数模板的名称，在参数模板名称需具有唯一性。
 - **数据库版本**：选择需要的数据库版本。
 - **模板描述**：输入参数模板的简要说明。
![](https://main.qcloudimg.com/raw/ae4c84cbecab9408f70ed38f22d38f67.png)
3. 创建完成后，您可以在模板详情页修改、导入、导出参数等。

## 应用参数模板于实例
1. 登录 [MySQL 控制台](https://console.cloud.tencent.com/mysql/parameter-templates)，在左侧导航选择【参数模板】页面。
2. 在参数模板列表中，找到需要应用的模板，单击【应用到实例】。
![](https://main.qcloudimg.com/raw/4638d7fa7a06cbfb3759240a2cee7679.png)
3. 在弹出页面，选择参数的执行方式和实例，检查参数修改无误后，单击【提交】。
 - **执行方式**：默认为【立即执行】；若选择【维护时间内】，所选实例的参数变更任务会在实例的 [维护时间](https://cloud.tencent.com/document/product/236/10929) 内执行并生效。
 - **MySQL 实例**：选择对应地域下，需要应用参数模板的实例。
 - **参数对比**：可查看所选实例参数修改前、后的配置。
 >!应用参数模板到多个实例上时，请确认参数是否适用这些实例，请您谨慎操作。
 >
![](https://main.qcloudimg.com/raw/b11df0930e01e8eab9057c88d73967b0.png)
4. （可选）任务提交后，如需取消修改参数，可在任务执行前（即任务状态为“等待执行”），在左侧导航【[任务列表](https://console.cloud.tencent.com/mysql/task)】页，单击“操作”列的【撤销】，取消修改参数。
![](https://main.qcloudimg.com/raw/05e07ce358a66c9b4a17d31016a78c4e.png)


云数据库 MySQL 除了提供多种系统参数模板供您选择外，您也可以创建自定义参数模板，根据自己的业务场景，实现批量参数设置。

您可以使用数据库参数模板管理数据库引擎的参数配置。数据库参数组就像是引擎配置值的容器，这些值可应用于一个或多个数据库实例。
参数模板支持如下功能，用户可登录 [云数据库 MySQL 控制台](https://console.cloud.tencent.com/cdb)，在左侧边栏选择【参数模板】页查看参数：
- 支持系统默认参数模板，包含高性能参数模版以及高稳定性模版。
- 支持新建模板，以默认参数模版为基础，稍加修改就能生成自定义的参数优化方案。
- 支持从 MySQL 配置文件 my.conf 导入生成模板。
- 支持从参数设置保存为模板。
- 单个或多个实例进行参数设置时，支持从模板导入。
- 支持两个参数模版之间进行对比。

>!
>- 已使用参数模板的数据库实例并不会随着参数模板更新而同步更新，需要手动批量更新数据库实例。
>- 如果您需要将新的参数应用到批量实例上，可通过批量参数设置时导入模板来重新应用。

## 系统默认模版说明
针对不同系统对于数据库性能、稳定性上要求不同，分别提供了注重性能或稳定性的默认模版。

### 高稳定性参数模版
高稳定性模版注重数据安全以及运行稳定性，对比高性能参数模版，运行速度较慢。涉及相关参数为：
```
sync_binlog = 1
innodb_flush_redo_using_fdatasync = false
innodb_flush_log_at_trx_commit = 1
```

### 高性能参数模版
高性能参数模版注重运行的性能，对比高稳定性参数模版，运行速度较快。涉及相关参数为：
```
sync_binlog = 1000
innodb_flush_redo_using_fdatasync = true
innodb_flush_log_at_trx_commit = 2
```

>!目前高性能参数模版仅支持5.6、5.7、8.0版本的云数据库 MySQL，且高性能参数模版会默认使用部分新特性，如动态线程池、大表异步清理、快速 DDL 能力，在高性能参数模版中默认打开。

### 参数说明
<table>
<thead><tr><th>参数</th><th>取值</th><th>说明</th></tr></thead>
<tbody><tr>
<td rowspan=2>innodb_flush_log_at_trx_commit</td>
<td>1</td>
<td>事务提交时，把事务日志从缓存区写到日志文件中，并且立刻写入到磁盘上。</td></tr>
<tr>
<td>2</td>
<td>事务提交时，把事务日志从缓存区写到日志文件中，但不一定立刻写入到磁盘上。日志文件会每秒写入到磁盘，如果写入前系统崩溃，就会导致最后1秒的日志丢失。</td></tr>
<tr>
<td rowspan=2>innodb_flush_redo_using_fdatasync</td>
<td>true</td>
<td>使用 fdatasync 刷 redo log file。 fdatasync 相比 fsync 不刷元数据部分，对性能略有提升。</td></tr>
<tr>
<td>false</td>
<td>使用 fsync 刷 redo log file。相比 fdatasync，对性能略有下降。</td></tr>
<tr>
<td rowspan=2>sync_binlog</td>
<td>1</td>
<td>事务提交后，将二进制日志文件写入磁盘并立即刷新，相当于同步写入磁盘，不经过系统缓存。</td></tr>
<tr>
<td>1000</td>
<td>每写入1000次系统缓存就执行一次写入磁盘并刷新的操作，会有数据丢失的风险。</td></tr>
</tbody></table>

## 新建参数模板
当您想使用自己的数据库参数模板时，只需创建一个新的数据库参数模板，修改所需的参数并应用于您的数据库，就可以使用新的数据库参数模板。
1. 登录 [MySQL 控制台](https://console.cloud.tencent.com/mysql/parameter-templates)，在左侧导航选择【参数模板】页面，单击【创建模板】。
![](https://main.qcloudimg.com/raw/4539e0e1857e2f676240fd71bd751ef2.png)
2. 在弹出的对话框，配置如下参数，单击【创建并设置参数】。
 - **模板名称**：输入参数模板的名称，在参数模板名称需具有唯一性。
 - **数据库版本**：选择需要的数据库版本。
 - **原始模版类型**：选择需要从哪一类默认模版作为创建模版。
 - **模板描述**：输入参数模板的简要说明。
![](https://main.qcloudimg.com/raw/69fac43e6bdd474d126c13f6248b702e.png)
3. 创建完成后，您可以在模板详情页修改、导入、导出参数等。

## 应用参数模板于实例
1. 登录 [MySQL 控制台](https://console.cloud.tencent.com/mysql/parameter-templates)，在左侧导航选择【参数模板】页面。
2. 在参数模板列表中，找到需要应用的模板，单击【应用到实例】。
![](https://main.qcloudimg.com/raw/aa970bebf399e4dde1aaeb65d5a2939c.png)
3. 在弹出页面，选择参数的执行方式和实例，检查参数修改无误后，单击【提交】。
 - **执行方式**：默认为【立即执行】；若选择【维护时间内】，所选实例的参数变更任务会在实例的 [维护时间](https://cloud.tencent.com/document/product/236/10929) 内执行并生效。
 - **MySQL 实例**：选择对应地域下，需要应用参数模板的实例。
 - **参数对比**：可查看所选实例参数修改前、后的配置。
 >!应用参数模板到多个实例上时，请确认参数是否适用这些实例，请您谨慎操作。
4. （可选）任务提交后，如需取消修改参数，可在任务执行前（即任务状态为“等待执行”），在左侧导航【[任务列表](https://console.cloud.tencent.com/mysql/task)】页，单击“操作”列的【撤销】，取消修改参数。
![](https://main.qcloudimg.com/raw/05e07ce358a66c9b4a17d31016a78c4e.png)

## 对比不同模版参数
您可以通过 MySQL 控制台对比不同自定义参数模版之间的差异或自定义参数模版与系统默认模版之间的差异，查看参数模版之间的不同。
1. 登录 [MySQL 控制台](https://console.cloud.tencent.com/mysql/parameter-templates)，在左侧导航选择【参数模板】页面。
2. 在参数模板列表中，选择需要对比的自定义模版，单击“操作”列的【对比】。
![](https://main.qcloudimg.com/raw/d4d53c0d02e2927f16532b64a1e520a0.png)
3. 在弹出的对话框，在“选择参数模版”选择需要进行对比的目标模版。
![](https://main.qcloudimg.com/raw/9ae2695a7b03c343e3f0948831dd74db.png)
4. 选择后查看参数模版对比结果。
![](https://main.qcloudimg.com/raw/e181ab59bb987ca9802be1fe940a4472.png)

## 复制参数模板
当您已创建一个数据库参数模板，并且想在新的数据库参数模板中包含该组中的大部分自定义参数和值时，复制参数模板是一个方便的解决方案。

### 方式一：通过已有参数模板复制参数模板
1. 登录 [MySQL 控制台](https://console.cloud.tencent.com/mysql/parameter-templates)，在左侧导航选择【参数模板】页面，单击模板名或“操作”列的【查看详情】，进入模板详情页。
2. 在模板详情页，选择上方的【更多操作】>【另存为模板】。
3. 在弹出的对话框，配置如下参数：
  - **模板名称**：输入参数模板的名称，在参数模板名称需具有唯一性。
  - **模板描述**：输入参数模板的简要说明。
4. 确认无误后，单击【保存】即可将当前参数模板另存为新的参数模板，完成复制操作。

### 方式二：通过实例的参数设置功能复制参数模板
1. 登录 [MySQL 控制台](https://console.cloud.tencent.com/cdb)，在左侧导航选择【实例列表】页面，单击实例名进入管理页。
2. 选择【数据库管理】>【参数设置】页，单击【另存为模板】。
3. 在弹出的对话框，配置如下参数：
  - **模板名称**：输入参数模板的名称，在参数模板名称需具有唯一性。
  - **模板描述**：输入参数模板的简要说明。
4. 确认无误后，单击【新建并保存】即可将当前参数模板另存为新的参数模板，完成复制操作。

## 修改参数模板的参数值
1. 登录 [MySQL 控制台](https://console.cloud.tencent.com/mysql/parameter-templates)，在左侧导航选择【参数模板】页面，单击模板名，进入模板详情页。
2. 在模板详情页，单击【批量修改参数】、或在“参数当前值”列，单击<img src="https://main.qcloudimg.com/raw/788902e3f8c335cf17de420f7181c2a8.png"  style="margin:0;">可修改参数值。
>!选择【导入参数】时，在从本地文件导入页中，选择参数配置文件时，需要注意配置文件的格式与MySQL数据库服务器的配置文件格式一致或者使用导出参数的文件模板，否则提示导入不成功。
>
![](https://main.qcloudimg.com/raw/95b4216e8ad5e75af31c1f4b34a1f30f.png)

## 导入参数模板
1. 登录 [MySQL 控制台](https://console.cloud.tencent.com/mysql/parameter-templates)，在左侧导航选择【参数模板】页面，单击模板名，进入模板详情页。
2. 在模板详情页，单击【导入参数】。
>!选择【导入参数】时，在从本地文件导入页中，选择参数配置文件时，需要注意配置文件的格式与MySQL数据库服务器的配置文件格式一致或者使用导出参数的文件模板，否则提示导入不成功。
>
3. 在弹出的对话框，选择文件，单击【导入并覆盖原有参数】。

## 导出参数模板
#### 方式一
1. 登录 [MySQL 控制台](https://console.cloud.tencent.com/mysql/parameter-templates)，在左侧导航选择【参数模板】页面。
2. 在参数模板列表，在所需模板的“操作”列，单击【导出】。

#### 方式二
1. 登录 [MySQL 控制台](https://console.cloud.tencent.com/mysql/parameter-templates)，在左侧导航选择【参数模板】页面，单击模板名，进入模板详情页。
2. 在模板详情页，在上方选择【更多操作】>【导出参数】。

## 删除参数模板
当您创建了多余的参数模板或者确定该参数模板已无使用价值，可通过删除参数模板功能删除不再使用的参数模板。
1. 登录 [MySQL 控制台](https://console.cloud.tencent.com/mysql/parameter-templates)，在左侧导航选择【参数模板】页面。
2. 在参数模板列表，在所需模板的“操作”列，单击【删除】。
3. 在弹出的对话框，单击【确定】即可完成删除参数模板操作。

## 后续操作
相关重要参数的配置建议，请参见 [参数配置建议](https://cloud.tencent.com/document/product/236/47084)。
