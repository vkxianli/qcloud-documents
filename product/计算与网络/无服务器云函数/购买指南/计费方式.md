


## 计费方式

用户可自行估算使用量，使用 [SCF 价格计算器](https://buy.cloud.tencent.com/price/scf/calculator) 计算具体的购买价格。关于 SCF 的详细计费介绍，请参见 [计费方式](https://cloud.tencent.com/document/product/583/12284) 、[产品定价](https://cloud.tencent.com/document/product/583/12281) 和 [欠费说明](https://cloud.tencent.com/document/product/583/12283)。

云函数 SCF 按照实际使用付费，采用后付费小时结，以**元**为单位进行结算。事件型函数账单及 Web 型函数账单由以下部分组成，每部分根据自身统计结果和计算方式进行费用计算，结果以**元**为单位，并保留小数点后两位。

<table>
	<tr>
		<th>事件型函数</th>
		<th>Web 型函数</th>
	</tr>
<td>
<li>资源使用费用 </li>
<li>调用次数费用</li>
<li>外网出流量费用</li>
<li>预置并发闲置费用</li>
</td>
<td>
<li>资源使用费用 </li>
<li>Web 函数调用次数费用</li>
<li>外网出流量费用</li>
<li>预置并发闲置费用</li>
</td>
</table>

资源使用、调用次数、外网出流量及预置并发闲置量单价请参见 [产品定价](https://cloud.tencent.com/document/product/583/12281)。其中，外网出流量按GB进行计算，详情请参见 [网络带宽计费](https://buy.cloud.tencent.com/price/idc) 中的按流量计费。


## 计量原则

云函数的计量内容，是函数代码在实际被加载运行的情况下产生，并产生对应费用。除配置了预置并发外，函数代码未实际运行时将不产生计量及费用。示例如下：

<table>
	<tr>
		<th>场景</th>
		<th>函数执行状态</th>
		<th>计量</th>
		<th>产生费用</th>
	</tr>
	<tr>
		<td>由于参数错误、函数名错误、函数不存在导致的请求错误。</td>
		<td>未执行</td>
		<td>否</td>
		<td>否</td>
	</tr>
	<tr>
		<td>由于函数执行超时、函数运行内存超限导致的报错。</td>
		<td>已执行</td>
		<td>是</td>
		<td>是</td>
	</tr>
	<tr>
		<td>由于函数代码问题导致的报错。</td>
		<td>已执行</td>
		<td>是</td>
		<td>是</td>
	</tr>
	<tr>
		<td>由于并发超限导致请求错误。</td>
		<td>未执行</td>
		<td>否</td>
		<td>否</td>
	</tr>
</table>

## 资源使用费用

**资源使用费用 =（资源使用量 - 免费资源额度）× 资源使用单价**

### 资源使用量 GBs

**资源使用量 = 函数配置内存 × 运行时长**

用户资源使用量，由函数配置内存，乘以函数运行时的计费时长得出。其中配置内存转换为 GB 单位，计费时长由毫秒（ms）转换为秒（s）单位，因此，资源使用量的计算单位为 **GBs**（GB-秒）。

例如，配置为256MB的函数，单次运行了1760ms，计费时长为1760ms，则单次运行的资源使用量为（256 / 1024）×（1760 / 1000） = 0.44GBs。

针对函数的每次运行，均会计算资源使用量，并按小时汇总求和，作为该小时的资源使用量。
>!
>- 当前云函数的资源用量，按照函数的配置内存乘以触发时的实际运行时长进行计费，相较于向上对齐100ms计费的方式，总体资源用量更低，产生的费用更低。详情可参见 [费用示例](https://cloud.tencent.com/document/product/583/12285)。
>- 由于云函数运行时所在的计算资源具有一定的不确定性，以及代码内的具体行为、涉及到的网络通信等影响，相同函数代码在触发时的运行时长会有轻微波动。

## 调用次数费用

**调用次数费用 = （函数调用量 - 免费调用额度） × 调用次数单价**

函数的每次触发执行，都记为一次调用，并按小时汇总求和，以**万次**为单位进行计算费用。


## 外网出流量费用

**外网出流量费用 = 外网出流量 × 流量单价**

用户在函数内访问外网资源时，会产生对外的流量。例如，将文件上传至外部某存储空间时：
- 代码中向外网提供的存储空间写入文件，会因发送文件产生出流量；从外网提供的存储空间读取数据或文件，仅有发送请求时的出流量，读取或下载文件不记录为出流量。
- 函数配置了私有网络 VPC，并在代码中向私有网络内的数据库中写入数据，不记录为出流量。
- 使用 API 网关触发器的函数，函数执行完成的返回数据，**不记录为函数出流量**；API 网关返回至客户端的数据，由 API 网关记录为出流量并计费。API 网关的流量计费规则详情可见 [API 网关流量费用说明](https://cloud.tencent.com/document/product/628/39300#llfy)。

>? 外网出流量费用，当前只发生在函数内访问外部资源。对于外网调用函数的能力，如 HTTP 请求、CDN 动作等触发器能力预计于2021年06月上线，并会配置对应的计费规则。


## 预置并发闲置费用
**预置并发闲置费用 = 闲置实例数 × 配置内存 × 闲置时长 × 预置并发闲置量定价**

- **闲置实例数**：云函数以10秒为粒度，统计10秒内该版本的最大并发数，由当前已启动的预置实例数减去最大并发数，即为闲置实例数。计算公式如下为：闲置实例数 = max（已启动的预置实例数 - 并发数, 0）
- **配置内存**：云函数预置并发配置的内存大小。
- **闲置时长**：预置并发闲置的时长。
- **预置并发闲置量定价**：详情请参见 [产品定价](https://cloud.tencent.com/document/product/583/12281)。

>?预置并发闲置量的计算单位为 GBs（GB-秒）。


预置并发功能只对已经配置并启动、但未使用的实例收取少量闲置费用，**对于已配置且在使用的实例不收取额外费用**。即只有当前版本的预置数量大于版本并发数时，会收取超出部分的闲置费用。未超出的部分不额外收费。




闲置实例数乘以配置内存，再乘以闲置时长得到预置并发闲置费用。如下图所示，图中阴影部分即为预置并发闲置部分。
![](https://main.qcloudimg.com/raw/90cb4cc5860919efef488384b7f6120b.png)

例如，内存为128MB的函数版本，其预置并发配额为12800MB（10个），在10秒内，该版本的并发数为8个，即：
- 闲置实例数 = max(10 - 8, 0) = 2
- 配置内存 = 128MB
- 闲置时长 = 10s
- 预置并发闲置量定价 = 0.00005471元/GBs

**预置并发闲置费用** = 2 × 128 / 1024GB × 10s × 0.00005471元/GBs = 0.00013678元




## 其他产品费用

如果在使用云函数时，使用了其他产品，例如消息队列 CMQ、Ckafka、API 网关及对象存储 COS 等，将按实际使用产品的计费规则进行费用计算。
