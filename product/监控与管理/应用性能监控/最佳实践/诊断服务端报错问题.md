## 问题分析
服务器端事务发生错误后，都会影响终端用户的访问，例如在网页端遇到报错提示，会给用户体验造成很大的影响，甚至会导致用户流失。
![](https://main.qcloudimg.com/raw/8d5b571c460e18e3391b3ec6d15550a2.png)
运维或研发人员往往需要登录机器查看日志来定位问题，进行错误分析。下图为一个常见的 Java 应用错误日志：
![](https://main.qcloudimg.com/raw/3a24bc3361f4d3af246250202a57ac52.jpg)
对于业务逻辑较简单的应用来说，登录机器查看日志的方式能够解决大部分网站报错的问题。但在下面的场景中，这种诊断方式往往效率不高，或者说不足以排查出错误根因。
- 在一个分布式应用集群中，需知道某一类错误的开始出现时间、持续时间和出现次数等。
- 对于某应用系统，研发人员想知道今天和昨天相比、或者发版后和发版前相比多了哪些异常。
- 查看每一次异常对应的接口、应用、应用实例和相关参数。

## 解决方案
为应用安装 TAPM 探针后，可以在不改动应用代码的情况下，利用 TAPM 追踪出具体是哪些事务、服务接口或后台任务发生了哪种类型的错误、请求的URL、请求参数，并展示异常的堆栈，全面掌握应用的各种错误信息。

## 诊断步骤
在诊断应用问题前，请确保已经为应用部署了 TAPM 探针。然后通过以下步骤追踪报错问题：
1. 登录 [应用性能监控控制台](https://console.cloud.tencent.com/tapm)。
2. 在左侧导航栏中选择【应用】，然后在页面左上角的【业务系统】下拉菜单中选择目标业务系统。
3. 在应用列表中单击目标应用的名称，进入应用详情页面。
4. 在页面顶部单击【错误】页签，进入该应用的错误统计分析页面。
   错误列表按错误的发生次数从高到低排列。
   ![](https://main.qcloudimg.com/raw/28bd0df39291eaa211b8fbe7038e002d.png)
5. 单击其中的一个错误，可以追踪这个错误都有哪些事务、服务接口或者后台任务发生过。
![](https://main.qcloudimg.com/raw/fed990a33e22bf1fcd6ed0d9ef97fb5c.png)
6. 单击接口名称，进入事务、服务接口或者后台任务的追踪页面。
   - **疑似问题概览**部分给出本次追踪的问题所在。
![](https://main.qcloudimg.com/raw/45bd509629a1a4f61ceb21f476c57ed9.png)
   - 切换到**调用栈**页签，单击下图中的【异常图标】，查看异常信息和堆栈信息，以便定位问题和优化代码。
![](https://main.qcloudimg.com/raw/fe758aff82de4f4d32ddbf95ad9f3583.png)
     ![](https://main.qcloudimg.com/raw/147de51205c49d47bcd776abc1df4481.png)
  - 也可以直接切换到**异常**页签，查看该次追踪中发生的所有异常。单击每个异常条目可查看异常信息和堆栈信息。
操作至此，您已发现了应用异常的原因，这将有效地帮助您进行下一步的代码优化工作。







