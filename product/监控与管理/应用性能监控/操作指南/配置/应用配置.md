

应用设置是以应用为单位进行配置项的设置，仅对指定的应用生效。部分配置项可以继承业务系统级别的配置，应用不能继承业务系统配置的自定义指标。本文将为您介绍如何进行应用设置。

## 前提条件


应用性能监控目前处于内测阶段，如需体验需通过 [应用性能监控内测申请](https://cloud.tencent.com/apply/p/f5yvbf09mka)。

## 操作步骤

1. 登录 [应用性能监控-配置](https://console.cloud.tencent.com/tapm/configuration)。在配置详情页切换到【应用设置】，进入应用设置详情页。
![](https://main.qcloudimg.com/raw/2a66045d5f742e056698c7a730d628cd.png)
2. 应用设置主要提供“常规选项”、“探针熔断”、“错误及异常”以及”事务“配置项，详细说明如下：
<dx-tabs>
::: 常规选项
- **应用别名**
  设置应用别名是为了用户在界面中更方面的查看应用，便于识别。
- **自动命名事务**
  默认情况下，应用探针通过在 Web 请求的 URI 前加上 URI 前缀来命名事务，即事务名称结构为：URI Web 请求的 URI 部分。当启用自动命名事务功能后，应用探针根据应用框架或组件来命名事务，以增强事务的可识别性，事务名称结构为：应用框架或组件名称 Web 请求的 URI 部分。
 本文提供该例子来说明自动命名事务功能。例如，用户从浏览器端发起一个 HTTP 请求，完整的 URL 为`http://www.xxx.com/sql/oracleException1.do?city=beijing`，如果处理该事物的组件为 Servlet，当未开启自动命名事务功能时，事务的名称为 `URI/sql/oracleException1.do` ，如果开启，则事务的名称为 `Servlet/sql/oracleException1.do`。

- **启用 Thrift 监控**
  开启该功能后，通过 Thrift 框架进行的 RPC 调用会被监控到。监控非官方 generator 生成的 Thrift 程序可能会造成应用崩溃，如果有定制或者二次开发，务必在测试环境充分测试后，谨慎开启此功能。

- **MQ 消费端监控**
  监控 MQ 消费端可能造成应用处理消息能力下降，进而 MQ 消息队列中的数据会快速增长导致积压，因此请务必在测试环境充分测试后，谨慎开启此功能。

- **ApdexT**
 应用性能指数设置，默认配置为500ms。
:::
::: 探针熔断
Java Agent 在运行过程中会消耗应用进程的资源，包括 CPU 和内存，当应用进程资源紧张时，为了应用进程稳定运行，Java Agent 将触发熔断机制，关闭部分数据采集以减少对进程资源的消耗。

相关名词解释如下：

-   **Heap 内存**：JVM 堆内存。
-   **Garbage Collection**：JVM 垃圾回收机制。
-  **Garbage Collection CPU 时间占比**：Garbage Collection 消耗的 CPU 时间/ CPU 总时间。<br><br>

触发探针熔断有两种情况：
- 当 Heap 内存使用率超过配置值时（默认值：70%）或者 Garbage Collection CPU 时间占比超过配置值时（默认值：10%），将对数据采集进行**采样**（默认值：50%）。
- 当 Heap 内存使用率超过配置值时（默认值：80%）或者 Garbage Collection CPU 时间占比超过配置值时（默认值：20%），将**禁用**数据采集，但仍保留探针心跳。

当应用进程的资源恢复后，恢复数据采集。
:::
::: 错误及异常
- **采集错误和异常**：开启时，应用探针将采集各业务系统中所有应用的错误和异常信息。默认为开启状态。
- **捕捉异常堆栈**：开启时，事务追踪中的异常信息将包含堆栈信息。默认为关闭状态。
:::
::: 事务

开启追踪启用后，应用探针对业务系统中请求响应时间超过指定阈值的事务会保留各种跟踪记录数据，例如代码的调用堆栈和执行时间、 HTTP 请求参数、查询慢的 SQL 语句等等。
- **事务追踪阈值**：当请求的响应时间大于阈值时才记录追踪详情数据。
- **慢方法堆栈**：对于事务涉及的方法、SQL 语句、NoSQL 操作、自定义方法，当执行时间大于阈值时才记录方法的堆栈、慢 SQL 详情和慢 NoSQL 操作详情。默认开启。
- **混淆 SQL**：指对跟踪到的 SQL 语句中的数字和字符串值进行混淆操作，以问号“?”替换。默认开启。
- **采集请求参数**：采集 HTTP 的请求头和请求参数。默认开启。
- **忽略的参数列表**：若不想采集个别敏感的参数，可以进行设置，多个参数以英文逗号进行分隔。
:::
</dx-tabs>

