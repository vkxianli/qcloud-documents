外部服务是指应用通过 HTTP 等协议请求调用的外部应用的统称，是以当前应用使用的外部服务的维度来展示相关性能数据。目前，系统支持监控 HTTP、HTTPS、Thrift、Dubbo、Web Service、EJB、gRPC 和 MINA 外部服务协议。本文将为您信息介绍如何查看应用的外部服务。


## 前提条件


应用性能监控目前处于内测阶段，如需体验需通过 [应用性能监控内测申请](https://cloud.tencent.com/apply/p/f5yvbf09mka)。

## 操作步骤

1. 登录 [应用性能监控-应用](https://console.cloud.tencent.com/tapm/application)，进入应用列表页。
2. 单击应用名称，进入应用详情页。
3. 单击【外部服务】，进入外部服务详情页。如下图所示：
![](https://main.qcloudimg.com/raw/b2353f725335f7f409fa5963fd8a03cb.png)
外部服务列表展示当前应用下统计周期内调用的所有外部服务。列表中包含以下的项目：
	- **类型**：外部服务的协议类型。
	- **外部服务**：外部服务名称，格式为主机名加端口号，或者为服务名。
	- **响应时间**：当前外部服务在统计周期内的响应时间历史趋势缩略图。
	- **平均响应时间**：当前外部服务在统计周期内的平均响应时间。支持正反排序。
	- **吞吐率**：当前外部服务在统计周期内的平均调用次数，单位tps。支持正反排序。
	- **健康度**：当前外部服务在统计周期内的健康度。支持正反排序。
	- **错误率**：当前外部服务在统计周期内发生异常（包括错误和未影响事务的异常）的次数占所有调用次数的百分比。支持正反排序。
4. 单击外部服务名称跳转到对应外部服务的概览界面，单击【性能】和【异常】页签可分别查看当前外部服务的性能数据和异常数据。
<dx-tabs>
::: 性能
性能图表如下图所示：
![](https://main.qcloudimg.com/raw/d8f4a06387731fac6720be52187ec457.png)
- **URI**：外部应用所提供的接口。此处可选择具体的接口来查看其监控统计数据。默认统计的是所调用的外部应用所有接口的性能数据。
- **平均响应时间和吞吐率**：外部服务平均响应时间是指在粒度时间内，该外部服务多次被调用的平均响应时间，响应时间为从应用发送外部服务调用请求开始到收到响应结果结束的耗时。吞吐率（qps）是指应用在粒度时间内每秒调用当前外部服务的次数。
- **调用者耗时百分比**：统计周期内，当前外部服务在每个调用者中的耗时百分比，调用者为当前应用的事物、服务接口或后台任务。<br>**计算公式为**：调用者各次调用该外部服务的总响应时间 / 各调用者的外部服务总耗时 × 100%
- **追踪列表**：展示当前外部服务的调用者每一次调用的详细情况。单击外部服务追踪列表的条目，可以查看该次外部服务的调用方法。
:::
::: 异常
- **错误曲线图**：当前应用或实例调用该外部服务发生异常（包括错误和未影响事务的异常）的次数占所有调用次数的百分比趋势图。
- **异常类型及数量**：图表显示统计周期内数量排名前5的异常（包括错误和未影响事务的异常）发生次数。
- **错误列表**：展示当前应用或实例发生的异常（包括错误和未影响事务的异常），详情请参见 [错误分析](https://cloud.tencent.com/document/product/1349/52253)。
:::
</dx-tabs>


