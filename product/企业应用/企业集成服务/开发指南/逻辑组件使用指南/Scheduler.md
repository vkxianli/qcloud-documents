

## 简介

Scheduler 是定时器，用于按设定的规则定时触发一条流，配置中包含一条或多条 Cron 规则，当任意一条 Cron 规则与当前时间匹配时，该定时器所在的集成流将被触发。

## 操作配置

### 参数配置

| 参数       | 数据类型 | 描述                              | 是否必填 | 默认值    |
| :--------- | :------- | :-------------------------------- | :------- | --------- |
| Cron 表达式 | string   | 设置触发规则，例如每分钟触发1次等 | 是       | 无        |
| 时区       | string   | 指定时区                        | 是       | UTC+08:00 |

Scheduler 包含一条或多条 cron 规则，当存在多条规则时，使用“\r”分隔，Cron 表达式的配置规则如下：

| 参数     | 含义                       | 取值范围    |
| -------- | -------------------------- | ----------- |
| seconds  | 秒                         | 0 - 59      |
| minutes  | 分钟                       | 0 - 59      |
| hours    | 小时                       | 0 - 23      |
| days     | 日期（选填，默认每天）     | 1 - 31      |
| months   | 月份（选填，默认每月）       | 1 - 12      |
| weekdays | 星期几（选填，默认不指定） | 1 - 7       |
| years    | 年份（选填，默认每年）     | 1970 - 2099 |

在配置 Cron 表达式时，可使用以下运算符：

| 运算符 | 释义 | 
|---------|---------|
| *| 表示任意匹配，例如：`hours="*"` 表示每个小时。 | 
| - | 表示范围，例如：`weekdays="1-5"` 表示周一至周五。 | 
| , | 表示并列，例如：`hours="8/2"` ，表示8点开始，每两个小时。 | 
| / | 表示增量，例如：`weekdays="6L"` ，表示当月最后一个周六。 | 
| L | 表示最后一个，例如：`weekdays="6L"` ，表示当月最后一个周六。 | 
| ? | 表示不指定。此处有一个约束，即年月日和星期几中至少要有一个为不指定，默认星期几是不指定的。为避免冲突，例如：同时指定2020年2月20日（原本周四）和周三。 | 




### 配置界面
![image-20210325152617066](https://main.qcloudimg.com/raw/038d1a756431055dc3ec7be37080cb92/image-20210325152617066.png)

### 输出
 
Scheduler 作为 trigger 组件，是集成流的第一个组件，Scheduler 会生成一个空的 message 消息，触发集成流的运行。

组件输出的 message 信息如下：

| message 属性 | 值                                                           |
| ----------- | ------------------------------------------------------------ |
| payload     | 空，没有值存在。                                               |
| error       | 执行成功后，error 为空；执行失败后，error 为 dict 类型，包含“Code”和“Description”字段：“Code”字段表示错误类型，“Description”字段表示错误具体信息。 |
| attribute   | 空，没有值存在。                                               |
| variable    | 空，没有值存在。                                                 |

## 案例
- 每5分钟触发一次。
   ![image-20210406110344183](https://main.qcloudimg.com/raw/b24d6ab47c53a4af3cfa2da3c7f9267a/image-20210406110344183.png)
- 每天8点触发。
   ![image-20210406110606711](https://main.qcloudimg.com/raw/c5ed3d86202c4e5725cd720a169d4145/image-20210406110606711.png)
